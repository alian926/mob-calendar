{"ast":null,"code":"import dayjs from 'dayjs';\n/**\n *\n * @param {*} dayjsDate dayjs对象\n */\n\nexport const getStartDay = dayjsDate => {\n  // 由于周日属于上一个周的, 如果第一天不是周日,需要减去一天进行调整\n  // console.log(dayjsDate.format('YYYY/MM/DD d ddd'), dayjsDate.format('d'));\n  if (Number(dayjsDate.format('d')) !== 0) {\n    return dayjsDate.startOf('week').subtract(1, 'day');\n  }\n\n  return dayjsDate;\n};\n/**\n *\n * @param {*} dayjsDate dayjs对象\n */\n\nexport const formatMonthData = dayjsDate => {\n  // 选中日期的当月第一天 即 某月1日\n  const currentMonthFirstDay = dayjsDate.startOf('month'); // NOTE: 周日属于上一天的结束,需要再减去一天\n  // 当月第一天所在周的 上周日,\n\n  const currentMonthStartDay = getStartDay(currentMonthFirstDay); // 上个月的第一天\n\n  const prevMonthFirstDay = currentMonthFirstDay.subtract(1, 'month'); // 上个月第一天所在周的开始\n\n  const prevMonthStartDay = getStartDay(prevMonthFirstDay); // 下个月的第一天\n\n  const nextMonthFirstDay = currentMonthFirstDay.add(1, 'month'); // 下个月第一天所在周的开始\n\n  const nextMonthStartDay = getStartDay(nextMonthFirstDay);\n  /**\n   * dayjsDate             2022-01-05 周三\n   * currentMonthFirstDay  2022-01-01 周六\n   * currentMonthStartDay  2021-12-26 周日\n   * prevMonthFirstDay     2021-12-01 周六\n   * prevMonthStartDay     2021-11-28 周日\n   * nextMonthFirstDay     2022-02-01 周二\n   * nextMonthStartDay     2022-01-30 周日\n   */\n  // 日期 6 * 7 即 42个数据\n\n  return {\n    currentMonthFirstDay,\n    monthDates: [new Array(42).fill('').map((_, index) => prevMonthStartDay.add(index, 'day')), new Array(42).fill('').map((_, index) => currentMonthStartDay.add(index, 'day')), new Array(42).fill('').map((_, index) => nextMonthStartDay.add(index, 'day'))]\n  };\n};\n/**\n *\n * @param {*} dayjsDate dayjs对象\n */\n\nexport const formatWeekData = dayjsDate => {\n  const currentWeekStartDay = dayjsDate.startOf('week').subtract(1, 'day');\n  const prevWeekStartDay = currentWeekStartDay.subtract(1, 'week');\n  const nextWeekStartDay = currentWeekStartDay.add(1, 'week');\n  return {\n    currentWeekFirstDay: currentWeekStartDay.add(1, 'day'),\n    weekDates: [new Array(7).fill('').map((_, index) => prevWeekStartDay.add(index, 'day')), new Array(7).fill('').map((_, index) => currentWeekStartDay.add(index, 'day')), new Array(7).fill('').map((_, index) => nextWeekStartDay.add(index, 'day'))]\n  };\n}; // 格式化年月显示\n\nexport const formatMonthYear = date => {\n  if (dayjs().isSame(date, 'year')) {\n    return dayjs(date).format('M月');\n  }\n\n  return dayjs(date).format('YYYY年MM月');\n};","map":{"version":3,"sources":["/Users/alian/Desktop/git-source/react-mob-calendar/src/utils/index.ts"],"names":["dayjs","getStartDay","dayjsDate","Number","format","startOf","subtract","formatMonthData","currentMonthFirstDay","currentMonthStartDay","prevMonthFirstDay","prevMonthStartDay","nextMonthFirstDay","add","nextMonthStartDay","monthDates","Array","fill","map","_","index","formatWeekData","currentWeekStartDay","prevWeekStartDay","nextWeekStartDay","currentWeekFirstDay","weekDates","formatMonthYear","date","isSame"],"mappings":"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","sourcesContent":["import dayjs, { Dayjs } from 'dayjs';\n/**\n *\n * @param {*} dayjsDate dayjs对象\n */\nexport const getStartDay = (dayjsDate: Dayjs) => {\n    // 由于周日属于上一个周的, 如果第一天不是周日,需要减去一天进行调整\n    // console.log(dayjsDate.format('YYYY/MM/DD d ddd'), dayjsDate.format('d'));\n    if (Number(dayjsDate.format('d')) !== 0) {\n        return dayjsDate.startOf('week').subtract(1, 'day');\n    }\n    return dayjsDate;\n};\n\n/**\n *\n * @param {*} dayjsDate dayjs对象\n */\nexport const formatMonthData = (dayjsDate: Dayjs) => {\n    // 选中日期的当月第一天 即 某月1日\n    const currentMonthFirstDay = dayjsDate.startOf('month');\n    // NOTE: 周日属于上一天的结束,需要再减去一天\n    // 当月第一天所在周的 上周日,\n    const currentMonthStartDay = getStartDay(currentMonthFirstDay);\n    // 上个月的第一天\n    const prevMonthFirstDay = currentMonthFirstDay.subtract(1, 'month');\n    // 上个月第一天所在周的开始\n    const prevMonthStartDay = getStartDay(prevMonthFirstDay);\n    // 下个月的第一天\n    const nextMonthFirstDay = currentMonthFirstDay.add(1, 'month');\n    // 下个月第一天所在周的开始\n    const nextMonthStartDay = getStartDay(nextMonthFirstDay);\n\n    /**\n     * dayjsDate             2022-01-05 周三\n     * currentMonthFirstDay  2022-01-01 周六\n     * currentMonthStartDay  2021-12-26 周日\n     * prevMonthFirstDay     2021-12-01 周六\n     * prevMonthStartDay     2021-11-28 周日\n     * nextMonthFirstDay     2022-02-01 周二\n     * nextMonthStartDay     2022-01-30 周日\n     */\n\n    // 日期 6 * 7 即 42个数据\n    return {\n        currentMonthFirstDay,\n        monthDates: [\n            new Array(42)\n                .fill('')\n                .map((_, index) => prevMonthStartDay.add(index, 'day')),\n            new Array(42)\n                .fill('')\n                .map((_, index) => currentMonthStartDay.add(index, 'day')),\n            new Array(42)\n                .fill('')\n                .map((_, index) => nextMonthStartDay.add(index, 'day')),\n        ],\n    };\n};\n\n/**\n *\n * @param {*} dayjsDate dayjs对象\n */\nexport const formatWeekData = (dayjsDate: Dayjs) => {\n    const currentWeekStartDay = dayjsDate.startOf('week').subtract(1, 'day');\n    const prevWeekStartDay = currentWeekStartDay.subtract(1, 'week');\n    const nextWeekStartDay = currentWeekStartDay.add(1, 'week');\n    return {\n        currentWeekFirstDay: currentWeekStartDay.add(1, 'day'),\n        weekDates: [\n            new Array(7)\n                .fill('')\n                .map((_, index) => prevWeekStartDay.add(index, 'day')),\n            new Array(7)\n                .fill('')\n                .map((_, index) => currentWeekStartDay.add(index, 'day')),\n            new Array(7)\n                .fill('')\n                .map((_, index) => nextWeekStartDay.add(index, 'day')),\n        ],\n    };\n};\n\n// 格式化年月显示\nexport const formatMonthYear = (date: Date | Dayjs): string => {\n    if (dayjs().isSame(date, 'year')) {\n        return dayjs(date).format('M月');\n    }\n    return dayjs(date).format('YYYY年MM月');\n};\n"]},"metadata":{},"sourceType":"module"}